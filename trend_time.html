<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Trend Over Time</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data Bank
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data_processing.html">Data Processing</a>
    </li>
    <li>
      <a href="eda.html">EDA</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analyses
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="trend_space.html">Trends over space</a>
    </li>
    <li>
      <a href="xyz.html">Trends over time</a>
    </li>
  </ul>
</li>
<li>
  <a href="report.html">Project Report</a>
</li>
<li>
  <a href="dashboard.html">Dashboard</a>
</li>
<li>
  <a href="https://xz3173.shinyapps.io/shiny_dashboard/">Shiny</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="about.html">The Project</a>
    </li>
    <li>
      <a href="about_us.html">Us</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/nishalingam/p8105_final-project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Trend Over Time</h1>

</div>


<pre class="r"><code>## generate date information separately for latter trend analysis

ufo_trend &lt;- read_csv(&quot;data/ufo_clean.csv&quot;)|&gt;
  #slice(1:50000)|&gt;
  mutate(
    year = year(date_time),
    month = month(date_time),
    hour = hour(date_time),
    weekday = factor(weekdays(date_time),
                     levels = c(&quot;Sunday&quot;, 
                         &quot;Monday&quot;, 
                         &quot;Tuesday&quot; , 
                         &quot;Wednesday&quot;, 
                         &quot;Thursday&quot;, 
                         &quot;Friday&quot;, 
                         &quot;Saturday&quot;))
  )</code></pre>
<pre><code>## Rows: 100820 Columns: 12
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr  (6): city, state, shape, duration, text, location
## dbl  (3): city_latitude, city_longitude, dist
## lgl  (1): duration_clean
## dttm (2): date_time, posted
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div id="trend-over-time-by-states" class="section level2">
<h2>Trend over time by states</h2>
<div id="observations-trend-over-years-by-states"
class="section level3">
<h3>Observations trend over years by states</h3>
<p>To look into the UFO observations trend over years by states, here we
take spaghetti plots to view the total observations of each state
throughout years.</p>
<pre class="r"><code>## function to generate data for trend analysis  
ufo_trend_var &lt;- function(df,var1,var2){  
  tidy_data &lt;- df |&gt;
  group_by(!!sym(var1), !!sym(var2))|&gt;
  summarise(
    obs = n()
  )|&gt;
  ungroup()
  
  return(tidy_data)
}

ufo_trend_plot &lt;- function(df,var_time,var_group){
  trendplot &lt;- df|&gt;
  ggplot(aes(x = !!sym(var_time), y = obs, color = !!sym(var_group)))+
  geom_line()+
  theme(legend.position = &quot;none&quot;)+
  geom_smooth(color = &quot;red&quot;)
  
  return(trendplot)
}

ufo_shape_plot &lt;- function(df,var_time){
  trendplot &lt;- df|&gt;
  ggplot(aes(x = !!sym(var_time), y = obs, color = shape))+
  geom_line()
  
  return(trendplot)
}</code></pre>
<pre class="r"><code>ufo_year_trend &lt;- ufo_trend_var(ufo_trend,var1=&quot;state&quot;,var2=&quot;year&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;state&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre class="r"><code>ufo_year_trend_plot &lt;- ufo_trend_plot(ufo_year_trend,&quot;year&quot;,&quot;state&quot;)+
  labs(title = &quot;Spaghetti plot of observations trend of states over years&quot;)

ufo_year_trend_plot</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-2-1.png" width="90%" /></p>
<p>From the plot of each state’s UFO observations over year, we can see
that:</p>
<ul>
<li>The total observations of UFO across states went through a rapid
increase right after 1995. This may result from the rapid development of
Internet at the end of 20th century.</li>
<li>Most states observations peaked at around 2014 and then started to
decline.</li>
<li>There was a sharp decline of observations at year 2018 for almost
all states and then went through another sharp increase in 2019 and
2020.</li>
<li>The observations within one state varied largely from year to year
with sharp increase or decrease.</li>
<li>UFO reports in CA was far more than other states in every year after
1995. This may due to the population effect.</li>
</ul>
<p>To avoid the influence of the extreme large observations of CA on the
overall trend, we may filter out this state and see the overall trend
then.</p>
<pre class="r"><code>ufo_year_trend_plot_rm &lt;- 
  ufo_year_trend |&gt;
  filter(!(state %in% c(&quot;CA&quot;)) )|&gt;
  ufo_trend_plot(&quot;year&quot;,&quot;state&quot;)+
  labs(title = &quot;Spaghetti plot of observations trend of states over years(CA Removed)&quot;)

ufo_year_trend_plot_rm</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-3-1.png" width="90%" /></p>
<p>The overall observations trend changed little compared to the
previous one.</p>
</div>
<div id="observations-trend-of-states-over-months"
class="section level3">
<h3>Observations trend of states over months</h3>
<p>Then we group the original data by state and month to see if there if
any trend through out months.</p>
<pre class="r"><code>ufo_month_trend &lt;- ufo_trend_var(ufo_trend,var1=&quot;state&quot;,var2=&quot;month&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;state&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre class="r"><code>ufo_month_trend_plot &lt;- 
  ufo_month_trend |&gt;
  ufo_trend_plot(&quot;month&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:12, labels = month.abb)+
  labs(title = &quot;Trend over month by states&quot;)

ufo_month_trend_plot_rm &lt;- 
  ufo_month_trend |&gt;
  filter(!(state %in% c(&quot;CA&quot;)) )|&gt;
  ufo_trend_plot(&quot;month&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:12, labels = month.abb)+
  labs(title = &quot;Trend over month by states(CA Removed)&quot;)

plot_grid(ufo_month_trend_plot,ufo_month_trend_plot_rm)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;
## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-4-1.png" width="90%" /></p>
<ul>
<li>The smooth line indicating a trend of average UFO observations in
all states of each month.</li>
<li>The observations slightly went down from January to March, then
increased and peaked around Aug, and declined till Dec.</li>
<li>For most states, summer is when most UFO observations were reported.
However, there are some exceptions. UFO observations in state FL peaked
at December.</li>
</ul>
<p>Like what we did in the year trend, we want to reduce the impact of
outlier. Therefore, we remove observations of CA. The trend is more
clear that observations in most states peaked at July and then declined
and reached the lowest at around February.</p>
</div>
<div id="obeservations-trend-of-states-over-hours"
class="section level3">
<h3>Obeservations trend of states over hours</h3>
<pre class="r"><code>ufo_hour_trend &lt;- ufo_trend_var(ufo_trend,var1=&quot;state&quot;,var2=&quot;hour&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;state&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre class="r"><code>ufo_hour_trend_plot &lt;- 
  ufo_hour_trend |&gt;
  ufo_trend_plot(&quot;hour&quot;,&quot;state&quot;)+
  labs(title = &quot;Trend over hours by states&quot;)

ufo_hour_trend_plot_rm &lt;- 
  ufo_hour_trend |&gt;
  filter(!(state %in% c(&quot;CA&quot;)) )|&gt;
  ufo_trend_plot(&quot;hour&quot;,&quot;state&quot;)+ 
  labs(title = &quot;Trend over hours by states(CA Removed)&quot;)

plot_grid(ufo_hour_trend_plot,ufo_hour_trend_plot_rm)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;
## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-5-1.png" width="90%" /></p>
<ul>
<li>The average observations during 6:00 to 15:00 were relatively
low.</li>
<li>There was an sharp increase of average observations starting from
15:00 and peaked at around 21:00.</li>
<li>The average observations started to decline slowly after 21:00.</li>
<li>People tends to observed UFO during evening than daytime.</li>
</ul>
<p>After removing the oulier of CA state, the trend is more clear.</p>
</div>
<div id="obeservations-trend-of-states-over-weekdays"
class="section level3">
<h3>Obeservations trend of states over weekdays</h3>
<pre class="r"><code>ufo_weekday_trend &lt;- ufo_trend_var(ufo_trend,var1=&quot;state&quot;,var2=&quot;weekday&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;state&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre class="r"><code>ufo_weekday_plot &lt;- ufo_weekday_trend |&gt;
  mutate(
    weekday = as.numeric(weekday)
  )|&gt;
  ufo_trend_plot(&quot;weekday&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:7, labels = c(&quot;Sun&quot;,&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thur&quot;,&quot;Fri&quot;,&quot;Sat&quot;))+
  labs(
    title = &quot;Trend over weekdays by states&quot;
  )

ufo_weekday_plot_rm&lt;- 
  ufo_weekday_trend |&gt;
  filter(!(state %in% c(&quot;CA&quot;)) )|&gt;
  mutate(
    weekday = as.numeric(weekday)
  )|&gt;
  ufo_trend_plot(&quot;weekday&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:7, labels = c(&quot;Sun&quot;,&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thur&quot;,&quot;Fri&quot;,&quot;Sat&quot;))+
  labs(title = &quot;Trend over weekdays by states (CA Removed)&quot;)

plot_grid(ufo_weekday_plot,ufo_weekday_plot_rm)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;
## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-6-1.png" width="90%" /></p>
<p>The overall trend for all states is not clear. For state CA,the
observations declined from Sunday to Monday, then increased during
weekdays and peaked at Saturday.</p>
<p>We may remove state CA to check the overall trend again.</p>
<p>Now we may notice a trend showed by the red smooth line that the
average observations went through an slow increase started Monday
through Friday and peaked at Saturday, then reduced during Sunday.</p>
<p>To make this statement clearer, we can view the bar plot of the
observations over weekdays.</p>
<pre class="r"><code>ufo_weekday_trend |&gt;
  mutate(
    weekday = as.numeric(weekday)
  )|&gt;
  ggplot(aes(x = weekday, y = obs))+
  geom_col()+
  scale_x_continuous(breaks = 1:7, labels = c(&quot;Sun&quot;,&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thur&quot;,&quot;Fri&quot;,&quot;Sat&quot;))+
  labs(
    title = &quot;Bar plot of observations trend of states over weekdays&quot;
  )</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-7-1.png" width="90%" /></p>
<p>The bar plot visualized the trend more clear. The overall
observations decreased from Sunday to Monday, then increased day by day
and reached the highest values at Saturday.</p>
</div>
</div>
<div id="trends-over-time-by-shape" class="section level2">
<h2>Trends over time by shape</h2>
<div id="trend-over-year-by-shape" class="section level3">
<h3>Trend over year by shape</h3>
<pre class="r"><code>obs_shape &lt;- ufo_trend |&gt;
  group_by(shape)|&gt;
  summarise(
    obs = n()
  )|&gt;
  arrange(desc(obs))|&gt;
  ungroup()

shape10 &lt;- obs_shape |&gt;
  head(10)|&gt;
  pull(shape)

ufo_shape &lt;- ufo_trend|&gt;
  filter(shape %in% shape10)</code></pre>
<p>In total there are 23 shape categories in the original dataset. Here
we extract the most observed 10 shapes to see the trend over year.</p>
<pre class="r"><code>ufo_year_shape &lt;- ufo_trend_var(ufo_shape,var1=&quot;shape&quot;,var2=&quot;year&quot;)</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;shape&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre class="r"><code>ufo_year_shape |&gt; 
  mutate(
    shape = factor(shape,levels = shape10)
  )|&gt;
  ggplot(aes(x = year, y = obs))+
  geom_line()+
  facet_grid(cols = vars(shape))+
  theme(axis.text.x = element_text(angle = 90, hjust = 1))+
  labs(title = &quot;Spaghetti plot of observations trend of states over years&quot;)</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-9-1.png" width="90%" /></p>
<p>For most observed shapes, they have similar trend over year:the
observations started to increase rapidly in 1990s and, then peaked at
around 2014, followed by an sharp decrease in 2018 and another peak in
2020.</p>
<p>Light, circle and triangle were the most observed shape of UFO. The
light shape had the most sharp change rate of all shapes.</p>
<p>However, trends of some shapes had different characteristics.</p>
<p>As for <code>fireball</code>, there was a peak before 2000 and a
relatively slow increase rate after that compared to others</p>
<p>As for <code>disk</code>, this is a traditional shape that comes to
people’s mind when talking about UFO. The observations of disk went
through an increase in 1970s right after the foundation of NUFORC. And
the increase rate of disk observations after 1990s was relatively low.
The highest value of observations in one year of was never over 250. (We
might consider not taking disk as a classic shape of UFO.)</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
