<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Trend Over Time</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Data Bank
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data_processing.html">Data Processing</a>
    </li>
    <li>
      <a href="eda.html">EDA</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analyses
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="trend_space.html">Trends over space</a>
    </li>
    <li>
      <a href="trend_time.html">Trends over time</a>
    </li>
    <li>
      <a href="text_analysis.html">Text Analysis</a>
    </li>
    <li>
      <a href="regression_analysis.html">Regression Analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="report.html">Project Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Shiny
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://xz3173.shinyapps.io/shiny_dashboard/">Dashboard</a>
    </li>
    <li>
      <a href="https://ncl2127.shinyapps.io/shiny_app/">Interactive Map</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="about.html">The Project</a>
    </li>
    <li>
      <a href="about_us.html">Us</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/nishalingam/p8105_final-project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Trend Over Time</h1>

</div>


<p>In this page, we are going to discuss the UFO sightings trend over
time. First we will look into the pattern of sightings by states over
years, months, weekdays and hours. To get rid off the population effect,
we also calculate the sightings per 1 million of each states and then
examine the trend over year and month. Then we will explore the
sightings by shape over years.</p>
<pre class="r"><code>library(tidyverse)
library(cowplot)</code></pre>
<pre><code>## Warning: package &#39;cowplot&#39; was built under R version 4.3.2</code></pre>
<pre class="r"><code>theme_set(theme_minimal() + theme(legend.position = &quot;bottom&quot;))

options(
  ggplot2.continuous.colour = &quot;viridis&quot;,
  ggplot2.continuous.fill = &quot;viridis&quot;
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d

Sys.setlocale(&quot;LC_TIME&quot;, &quot;en_US.UTF-8&quot;)</code></pre>
<pre><code>## [1] &quot;en_US.UTF-8&quot;</code></pre>
<pre class="r"><code>## read in census data for state and population

census &lt;- read_csv(&quot;./data/us_census.csv&quot;)|&gt;
  rename(state = abbrv)|&gt;
  mutate(
    state_pop = (census_2000+census_2010+census_2020)/3
  )|&gt;
  select(state,state_pop)

## get state for 51 states
state_us &lt;- census|&gt;pull(state)|&gt;unique()

## generate date information separately for latter trend analysis

ufo_trend &lt;- read_csv(&quot;data/ufo_clean.csv&quot;)|&gt;
  filter(state %in% state_us)|&gt;
  mutate(
    year = year(date_time),
    month = month(date_time),
    hour = hour(date_time),
    weekday = factor(weekdays(date_time),
                     levels = c(&quot;Sunday&quot;, 
                         &quot;Monday&quot;, 
                         &quot;Tuesday&quot; , 
                         &quot;Wednesday&quot;, 
                         &quot;Thursday&quot;, 
                         &quot;Friday&quot;, 
                         &quot;Saturday&quot;))
  )</code></pre>
<div id="sightings-trend-over-time-by-states" class="section level2">
<h2>Sightings trend over time by states</h2>
<div id="trend-over-years-by-states" class="section level3">
<h3>Trend over years by states</h3>
<p>To look into the UFO sightings trend over years by states, here we
take spaghetti plots to view the total sightings of each state
throughout years.</p>
<pre class="r"><code>## function to generate data for trend analysis  
ufo_trend_var &lt;- function(df,var1,var2){  
  tidy_data &lt;- df |&gt;
  group_by(!!sym(var1), !!sym(var2))|&gt;
  summarise(
    obs = n()
  )|&gt;
  ungroup()
  
  return(tidy_data)
}

ufo_trend_plot &lt;- function(df,var_time,var_group){
  trendplot &lt;- df|&gt;
  ggplot(aes(x = !!sym(var_time), y = obs, color = !!sym(var_group)))+
  geom_line()+
  theme(legend.position = &quot;none&quot;)+
  geom_smooth(color = &quot;red&quot;)
  
  return(trendplot)
}

ufo_shape_plot &lt;- function(df,var_time){
  trendplot &lt;- df|&gt;
  ggplot(aes(x = !!sym(var_time), y = obs, color = shape))+
  geom_line()
  
  return(trendplot)
}

ufo_per_trend &lt;- function(df){
  df_per_trend &lt;- df|&gt;
  left_join(census,by = &quot;state&quot;)|&gt;
  mutate(
    obs = obs/state_pop*1000000
  )
  
  return(df_per_trend)
}</code></pre>
<pre class="r"><code>ufo_year_trend &lt;- ufo_trend_var(ufo_trend,var1=&quot;state&quot;,var2=&quot;year&quot;)

ufo_year_trend_plot &lt;- ufo_trend_plot(ufo_year_trend,&quot;year&quot;,&quot;state&quot;)+
  labs(title = &quot;Trend over years by states&quot;)

ufo_year_trend_plot_rm &lt;- 
  ufo_year_trend |&gt;
  filter(!(state %in% c(&quot;CA&quot;)) )|&gt;
  ufo_trend_plot(&quot;year&quot;,&quot;state&quot;)+
  labs(title = &quot;Trend over years by states(CA Removed)&quot;)

plot_grid(ufo_year_trend_plot,ufo_year_trend_plot_rm)</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>From the plot of each state’s UFO sightings over year, we can see
that:</p>
<ul>
<li>The total sightings of UFO across states went through a rapid
increase right after 1995. This may result from the rapid development of
Internet at the end of 20th century.</li>
<li>Most states sightings peaked at around 2014 and then started to
decline.</li>
<li>There was a sharp decline of sightings at year 2018 for almost all
states and then went through another sharp increase in 2019 and
2020.</li>
<li>The sightings within one state varied largely from year to year with
sharp increase or decrease.</li>
<li>UFO reports in California was far more than other states in every
year after 1995. This may due to the population effect.</li>
</ul>
<p>To avoid the influence of the extreme large sightings of CA on the
overall trend, we may filter out this state and see the overall trend
then.</p>
<p>The overall sightings trend changed little compared to the previous
one.</p>
</div>
<div id="trend-over-months-by-states" class="section level3">
<h3>Trend over months by states</h3>
<p>Then we group the original data by state and month to see if there if
any trend throughout months.</p>
<pre class="r"><code>ufo_month_trend &lt;- ufo_trend_var(ufo_trend,var1=&quot;state&quot;,var2=&quot;month&quot;)

ufo_month_trend_plot &lt;- 
  ufo_month_trend |&gt;
  ufo_trend_plot(&quot;month&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:12, labels = month.abb)+
  scale_color_manual(name = &quot;state&quot;, values = c(&quot;FL&quot; = &quot;orange&quot;,&quot;CA&quot; = &quot;blue&quot;,&quot;WA&quot;=&quot;yellow&quot;)) +
  theme(legend.position = &quot;bottom&quot;)+
  labs(title = &quot;Trend over month by states&quot;)

ufo_month_trend_plot_rm &lt;- 
  ufo_month_trend |&gt;
  filter(!(state %in% c(&quot;CA&quot;)))|&gt;
  ufo_trend_plot(&quot;month&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:12, labels = month.abb)+
  scale_color_manual(name = &quot;state&quot;, values = c(&quot;FL&quot; = &quot;orange&quot;,&quot;WA&quot;=&quot;yellow&quot;)) +
  theme(legend.position = &quot;bottom&quot;)+
  labs(title = &quot;Trend over month by states(CA Removed)&quot;)

plot_grid(ufo_month_trend_plot,ufo_month_trend_plot_rm)</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<ul>
<li>The red smooth line indicating a trend of average UFO sightings in
all states of each month.</li>
<li>The sightings slightly went down from January to March, then
increased and peaked around August, and declined till December.</li>
<li>For most states, summer is when most UFO sightings were reported.
However, there are some exceptions. UFO sightings in state Florida
peaked at December, as shown by the orange line in the plot.</li>
<li>The sightings in Washington aggregately went through the most rapid
increase started from May and then a rapid decrease right after Jul. WA
state has the high range of sightings by month.</li>
</ul>
<p>Like what we did in the year trend, we want to reduce the impact of
outlier. Therefore, we remove sightings of California. The trend is more
clear that sightings in most states peaked at July and then declined and
reached the lowest at around February.</p>
</div>
<div id="trend-over-hours-by-states" class="section level3">
<h3>Trend over hours by states</h3>
<pre class="r"><code>ufo_hour_trend &lt;- ufo_trend_var(ufo_trend,var1=&quot;state&quot;,var2=&quot;hour&quot;)

ufo_hour_trend_plot &lt;- 
  ufo_hour_trend |&gt;
  ufo_trend_plot(&quot;hour&quot;,&quot;state&quot;)+
  labs(title = &quot;Trend over hours by states&quot;)

ufo_hour_trend_plot_rm &lt;- 
  ufo_hour_trend |&gt;
  filter(!(state %in% c(&quot;CA&quot;)) )|&gt;
  ufo_trend_plot(&quot;hour&quot;,&quot;state&quot;)+ 
  labs(title = &quot;Trend over hours by states(CA Removed)&quot;)

plot_grid(ufo_hour_trend_plot,ufo_hour_trend_plot_rm)</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<ul>
<li>The average sightings during 6:00 to 15:00 were relatively low.</li>
<li>There was an sharp increase of average sightings starting from 15:00
and peaked at around 21:00.</li>
<li>The average sightings started to decline slowly after 21:00.</li>
<li>People tends to observed UFO during evening than daytime.</li>
</ul>
<p>After removing the outlier of California state, the trend is more
clear.</p>
</div>
<div id="trend-over-weekdays-by-states" class="section level3">
<h3>Trend over weekdays by states</h3>
<pre class="r"><code>ufo_weekday_trend &lt;- ufo_trend_var(ufo_trend,var1=&quot;state&quot;,var2=&quot;weekday&quot;)


ufo_weekday_plot &lt;- ufo_weekday_trend |&gt;
  mutate(
    weekday = as.numeric(weekday)
  )|&gt;
  ufo_trend_plot(&quot;weekday&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:7, labels = c(&quot;Sun&quot;,&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thur&quot;,&quot;Fri&quot;,&quot;Sat&quot;))+
  labs(
    title = &quot;Trend over weekdays by states&quot;
  )

ufo_weekday_plot_rm&lt;- 
  ufo_weekday_trend |&gt;
  filter(!(state %in% c(&quot;CA&quot;)) )|&gt;
  mutate(
    weekday = as.numeric(weekday)
  )|&gt;
  ufo_trend_plot(&quot;weekday&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:7, labels = c(&quot;Sun&quot;,&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thur&quot;,&quot;Fri&quot;,&quot;Sat&quot;))+
  labs(title = &quot;Trend over weekdays by states (CA Removed)&quot;)

plot_grid(ufo_weekday_plot,ufo_weekday_plot_rm)</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>The overall trend for all states is not clear. For California,the
sightings declined from Sunday to Monday, then increased during weekdays
and peaked at Saturday.</p>
<p>We may remove state California to check the overall trend again.</p>
<p>Now we may notice a trend showed by the red smooth line that the
average sightings went through an slow increase started Monday through
Friday and peaked at Saturday, then reduced during Sunday.</p>
<p>To make this statement clearer, we can view the bar plot of the
sightings over weekdays.</p>
<pre class="r"><code>ufo_weekday_trend |&gt;
  mutate(
    weekday = as.numeric(weekday)
  )|&gt;
  ggplot(aes(x = weekday, y = obs))+
  geom_col()+
  scale_x_continuous(breaks = 1:7, labels = c(&quot;Sun&quot;,&quot;Mon&quot;,&quot;Tue&quot;,&quot;Wed&quot;,&quot;Thur&quot;,&quot;Fri&quot;,&quot;Sat&quot;))+
  labs(
    title = &quot;Bar plot of sightings trend of states over weekdays&quot;
  )</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>The bar plot visualized the trend more clear. The overall sightings
decreased from Sunday to Monday, then increased day by day and reached
the highest values at Saturday.</p>
</div>
</div>
<div id="sightings-trend-per-1m-population-over-time-by-state"
class="section level2">
<h2>Sightings trend per 1M population over time by state</h2>
<p>In the previous part of this page, we discuss about the population
effect on the overall trend over year. Here, we take the average of
population of 2000,2010,2020 of each state, and use this average
population to calculate the sightings per one million from 1995 to 2022
to get rid of the population effect, then we examine the average trend
over time. We mainly discuss the trend of sightings per 1 million
population over year and month here.</p>
<div id="trend-per-1m-population-over-year-by-state"
class="section level3">
<h3>Trend per 1M population over year by state</h3>
<pre class="r"><code>ufo_per &lt;- ufo_trend|&gt;
  filter(
    year &gt;= 1995
  )

ufo_year_per &lt;- ufo_trend_var(ufo_per,&quot;state&quot;,&quot;year&quot;)|&gt;
  ufo_per_trend()

ufo_year_per_plot &lt;- ufo_year_per|&gt;
  ufo_trend_plot(&quot;year&quot;,&quot;state&quot;)+
  labs(
    title = &quot;sightings by states over years(per 1M)&quot;,
    y = &quot;obs per 1M&quot;   )

ufo_year_per_plot_spec &lt;- ufo_year_per|&gt;
  filter(state %in% c(&quot;VT&quot;,&quot;CA&quot;))|&gt;
  ggplot(aes(y = obs,x = year, color = state))+
  geom_line()+
  labs(title = &quot;sightings of VT and CA over years(per 1M)&quot;,
       y = &quot;obs per 1M&quot;)

plot_grid(ufo_year_per_plot,ufo_year_per_plot_spec)</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<ul>
<li>For sightings per 1M population, the trend looks a slightly
different from the aggregate sightings trend.</li>
<li>We can still see the fast increase right after 1995, but the
increase rate after 2002 is relatively slow.</li>
<li>There is a rapid increase after 2008 and then peaked at 2014, then
decreased till around 2017.</li>
<li>The sightings remained stable for a short period after 2017 then
decreased to a relatively low level.</li>
<li>The state with most sightings per 1M is Vermont. After taking
population into account, the sightings in California varied in an
average pace.</li>
</ul>
</div>
<div id="trend-per-1m-population-over-month-by-state"
class="section level3">
<h3>Trend per 1M population over month by state</h3>
<pre class="r"><code>ufo_month_per &lt;- ufo_trend_var(ufo_per,&quot;state&quot;,&quot;month&quot;)|&gt;
  ufo_per_trend()

ufo_month_per_plot &lt;- ufo_month_per|&gt;
  ufo_trend_plot(&quot;month&quot;,&quot;state&quot;)+
  scale_x_continuous(breaks = 1:12, labels = month.abb)+
  labs(
    title = &quot;sightings over months(per 1M)&quot;,
    y = &quot;obs per 1M&quot;   )

ufo_month_per_plot_spec &lt;- ufo_month_per|&gt;
  filter(state %in% c(&quot;CA&quot;,&quot;FL&quot;,&quot;AK&quot;))|&gt;
  ggplot(aes(y = obs,x = month, color = state))+
  geom_line()+
  scale_x_continuous(breaks = 1:12, labels = month.abb)+
  labs(title = &quot;sightings over months of3 states(per 1M)&quot;,
       y = &quot;obs per 1M&quot;)

plot_grid(ufo_month_per_plot,ufo_month_per_plot_spec)</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<ul>
<li>The sightings trend over month change little after adjusting for
population.</li>
<li>However, there were some certain states that went against the
average trend. State Alaska had the most sightings per 1M in winter and
the lowest sightings in summer. This may due to the polar night in
winter.</li>
<li>Also, we can see that the change rate of California over months was
relatively stable.</li>
</ul>
</div>
</div>
<div id="sightings-trend-over-time-by-shape" class="section level2">
<h2>Sightings trend over time by shape</h2>
<div id="trend-over-year-by-shape" class="section level3">
<h3>Trend over year by shape</h3>
<pre class="r"><code>obs_shape &lt;- ufo_trend |&gt;
  group_by(shape)|&gt;
  summarise(
    obs = n()
  )|&gt;
  arrange(desc(obs))|&gt;
  ungroup()

shape10 &lt;- obs_shape |&gt;
  head(10)|&gt;
  pull(shape)

ufo_shape &lt;- ufo_trend|&gt;
  filter(shape %in% shape10)</code></pre>
<p>In total there are 23 shape categories in the original dataset. Here
we extract the most observed 10 shapes to see the trend over year.</p>
<pre class="r"><code>ufo_year_shape &lt;- ufo_trend_var(ufo_shape,var1=&quot;shape&quot;,var2=&quot;year&quot;)

ufo_year_shape |&gt; 
  mutate(
    shape = factor(shape,levels = shape10)
  )|&gt;
  ggplot(aes(x = year, y = obs))+
  geom_line()+
  facet_grid(cols = vars(shape))+
  theme(axis.text.x = element_text(angle = 90, hjust = 1))+
  labs(title = &quot;Spaghetti plot of sightings trend of states over years&quot;)</code></pre>
<p><img src="trend_time_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>For most observed shapes, they have similar trend over year: the
sightings started to increase rapidly in 1990s and, then peaked at
around 2014, followed by an sharp decrease in 2018 and another peak in
2020.</p>
<p>Light, circle and triangle were the most observed shape of UFO. The
light shape had the most sharp change rate of all shapes.</p>
<p>However, trends of some shapes had different characteristics.</p>
<p>As for <code>fireball</code>, there was a peak before 2000 and a
relatively slow increase rate after that compared to others</p>
<p>As for <code>disk</code>, this is a traditional shape that comes to
people’s mind when talking about UFO. The sightings of disk went through
an increase in 1970s right after the foundation of NUFORC. And the
increase rate of disk sightings after 1990s was relatively low. The
highest value of sightings in one year of was never over 250. (We might
consider not taking disk as a classic shape of UFO.)</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
